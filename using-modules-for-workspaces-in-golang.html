<!DOCTYPE html>
<html lang="en">
<head>
    <title>Alice/Development Notes &mdash; Using modules for workspaces in golang</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="https://aliceh75.github.io/theme/css/style.css"/>
</head>

<body>
    <div id="container">
        <div id="header">
                <div id="site-title"><a href="https://aliceh75.github.io">Alice/Development Notes</a></div>
        </div>

        <div id="contents">
    <div class="post">
        <div class="entry-meta">
            <div class="date">Sat 01 December 2018</div>
            <div class="author">By Alice Heaton</div>
                <div class="tag-list">
                        <a href="https://aliceh75.github.io/tag/golang" rel="tag">#golang</a>
                </div>
        </div>
        <div class="entry-main">
            <h1 class="entry-title">
                <a href="https://aliceh75.github.io/using-modules-for-workspaces-in-golang" title="Using modules for workspaces in golang"
                   rel="bookmark">Using modules for workspaces in golang</a>
            </h1>
            <div class="entry-content">
                  <p>As of Go 1.11, golang has (experimental) <a href="https://golang.org/doc/go1.11#modules">support for modules</a>. This addresses a number of needs - such as ensuring semantic versioning, ensuring reproducible builds, etc. Here I look specifically at how modules help replace the need for $GOPATH based workspaces.</p>
<p>In that context a module is simply an isolated collection of packages - as you'd get with a <a href=="https://docs.python.org/3/tutorial/venv.html">Python virtual environment</a>.</p>
<p>With Go 1.11 you create a module by adding a <code>go.mod</code> file in a folder outside of your $GOPATH. This file can be created automatically by running <code>go mod init</code>:</p>
<div class="highlight"><pre><span></span>$ mkdir myexample
$ <span class="nb">cd</span> myexample
$ go mod init myexample
</pre></div>


<p>Once you've done that, when you run a go command in folder beneath <code>myexample</code>, go will use the place where the <code>go.mod</code> file is a your project root. You should place your <code>main</code> package in the project root, and can place other packages in their own folder. Packages are then imported using <code>myexample/packagename</code>. So if you had the following file in <code>myexample/greetings/hello.go</code>:</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">greetings</span>

<span class="kd">func</span> <span class="nx">hello</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="s">&quot;Hello World&quot;</span>
<span class="p">}</span>
</pre></div>


<p>You could then import the <code>greetings</code> package from, say <code>myexample/main.go</code> as <code>myexample/greetings</code>:</p>
<div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
  <span class="s">&quot;fmt&quot;</span>
  <span class="s">&quot;myexample/greetings&quot;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">fmt</span><span class="p">.</span><span class="nx">PrintLn</span><span class="p">(</span><span class="nx">greetings</span><span class="p">.</span><span class="nx">hello</span><span class="p">())</span>
<span class="p">}</span>
</pre></div>


<p>And you can then run the code by executing (from within the <code>myexample</code> folder hierarchy):</p>
<div class="highlight"><pre><span></span>$ go run myexample
</pre></div>


<p>There is a lot more to modules than enabling workspaces - I suggest you look at the <a href="https://github.com/golang/go/wiki/Modules">Go Modules Wiki</a> for more information on modules, in particular how they replace other forms of dependency management.</p>
            </div>
        </div>
    </div>
        </div>

        <div id="footer">
            <p>Alice online: <a href="http://github.com/aliceh75">GitHub</a> <a href="https://twitter.com/aliceheaton75">Twitter</a></p>
            <p>Site generated by <a href="http://pelican.readthedocs.org">Pelican</a>, theme loosely based on <a href="https://github.com/tbunnyman/pelican-chunk">Chunk</a></p>
            <p>All content by Alice Heaton, licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
               <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
            </p>
        </div>
    </div>
</body>
</html>