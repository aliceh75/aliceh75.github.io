<!DOCTYPE html>
<html lang="en">
<head>
    <title>Alice/Development Notes &mdash; Setting up a Cordova development environment in Ubuntu</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" type="text/css" href="https://aliceh75.github.io/theme/css/style.css"/>
</head>

<body>
    <div id="container">
        <div id="header">
                <div id="site-title"><a href="https://aliceh75.github.io">Alice/Development Notes</a></div>
        </div>

        <div id="contents">
    <div class="post">
        <div class="entry-meta">
            <div class="date">Tue 03 November 2015</div>
            <div class="author">By Alice Heaton</div>
                <div class="tag-list">
                        <a href="https://aliceh75.github.io/tag/android" rel="tag">#android</a>
                        <a href="https://aliceh75.github.io/tag/cordova" rel="tag">#cordova</a>
                </div>
        </div>
        <div class="entry-main">
            <h1 class="entry-title">
                <a href="https://aliceh75.github.io/setting-up-cordova-dev-environmnent-in-ubuntu" title="Setting up a Cordova development environment in Ubuntu"
                   rel="bookmark">Setting up a Cordova development environment in Ubuntu</a>
            </h1>
            <div class="entry-content">
                  <p>While there are many guides on setting up <a href="https://cordova.apache.org/">Apache Cordova</a> for Android development on Ubuntu, none seemed to cover all the issues I encountered - it took a combination of resources to get there. I decided to write how I went about setting this up, and the issues I encountered along the way.</p>
<p>Note that this was done on Ubuntu 14.04.</p>
<h2>Download the Android SDK</h2>
<p>The Android SDK is Google's development platform for Android applications. Even though we're going to do cross platform development using Cordova we still need to install the SDK so Cordova can build and deploy the Android version of the application.</p>
<p>The Android SDK can be downloaded directly from Google. I install it under <code>/usr/local</code>:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> /usr/local
sudo wget http://dl.google.com/android/android-sdk_r24.3.4-linux.tgz
sudo tar -xzf android-sdk_r23.3.4-linux.tgz
sudo chmod ugo+x /usr/local/android-sdk-linux/tools/android
</pre></div>


<p>You should then update the SDK to the latest version, and download the Android APIs for the version you want to build for. You can do this using the Android SDK provided GUI tool:</p>
<div class="highlight"><pre><span></span>gksudo /usr/local/android-sdk-linux/tools/android update sdk
</pre></div>


<p>By default this will install the latest version of the tools, and the latest version of the Android APIs (You'll need to accept a number of licences). If you want to develop for older versions of Android, make sure to select the APIs accordingly.</p>
<p>You will need the <code>tools</code> and <code>platform-tools</code> folders in your path. I add this to my <code>~/.bashrc</code>:</p>
<div class="highlight"><pre><span></span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$PATH</span><span class="s2">:/usr/local/android-sdk-linux/tools:/usr/local/android-sdk-linux/platform-tools&quot;</span>
</pre></div>


<h2>Install Cordova, and create a skeleton application</h2>
<p>The easy way is to use <a href="https://www.npmjs.com/">npm</a>, the Javascript package manager, which you may need to install first:</p>
<div class="highlight"><pre><span></span>sudo apt-get install npm
</pre></div>


<p>You can then install Cordova globally:</p>
<div class="highlight"><pre><span></span>sudo npm install -g cordova
</pre></div>


<p>Note that if you want to run on older Android versions (eg. 2.3), you will need an older version of Cordova. So for Android 2.3 support, you would want to install:</p>
<div class="highlight"><pre><span></span>sudo npm install -g <span class="s2">&quot;cordova@4.3.0&quot;</span>
</pre></div>


<p>Finally create a skeleton project:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> ~/projects
cordova create myapp com.example.myapp MyApp
</pre></div>


<p>Where <code>myapp</code> is the folder name, <code>com.example.myapp</code> the reverse domain name that uniquely identifies your application, and <code>MyApp</code> the actual name of the application. This will create multiple folders under <code>~/projects/myapp</code>:</p>
<ul>
<li><code>hooks</code>: Initially empty, you can add scripts to customize cordova commands. See the README in the folder;</li>
<li><code>platforms</code>: This contains the files needed to build the application for each target environment, and is populated when you run commands such as <code>cordova platform add android</code> (see next section);</li>
<li><code>plugins</code>: This contains your cordova plugins, and is populated when you run commands such as <code>cordova plugin add org.apache.cordova.device</code> (see next section);</li>
<li><code>www</code>: This is where your application lives! It all starts with an <code>index.html</code> file, and from there on it's up to you!</li>
</ul>
<p>I exclude both the <code>platforms</code> and <code>plugins</code> folders from version control. I have not had the need to edit any of their content, and they can easily be generated by invoking the appropriate cordova commands. If you were to edit some files under <code>platforms</code>, you would probably want to exclude some of it's sub-folders, as build binaries go there.</p>
<p>So my <code>.gitignore</code> includes:</p>
<div class="highlight"><pre><span></span>platforms/
plugins
</pre></div>


<h2>Add Android platform to your project</h2>
<p>You add the android platform by doing:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> ~/projects/myapp
cordova platform add android
</pre></div>


<p>You also use the cordova command line to add plugins by running, for example:</p>
<div class="highlight"><pre><span></span>cordova plugin add org.apache.cordova.device
</pre></div>


<p>There a two basic plugins that are recommended for all projects:</p>
<ul>
<li>The <a href="https://github.com/apache/cordova-plugin-device">device plugin</a>, <code>org.apache.cordova.device</code>, adds a global <code>device</code> object which describes the device's hardware and software;</li>
<li>The <a href="https://github.com/apache/cordova-plugin-console">console plugin</a>, <code>org.apache.cordova.console</code>, improves the native <code>console.log</code> calls.</li>
</ul>
<h2>Start the adb server</h2>
<p>The Android SDK runs a server used to connect to attached Android devices - the <a href="https://developer.android.com/tools/help/adb.html">Android Debug Bridge</a> known as <code>adb</code>.</p>
<p>The <code>adb</code> server must be run as root. However Cordova commands that require it will launch it as the current user - causing cryptic errors such as "no target specified" when you try to run the application. </p>
<p>To prevent this from happening you must first launch the adb server as root. You can start the server as a service at every boot, or just start it manually at the beginning of every session:</p>
<div class="highlight"><pre><span></span>sudo adb start-server
</pre></div>


<p>If you forgot to start it, you must stop it and re-start it:</p>
<div class="highlight"><pre><span></span>sudo adb kill-server
sudo adb start-server
</pre></div>


<h2>Check it's working</h2>
<p>We're ready to check if it's working! Edit the index file to put a success message:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> ~/projects/myapp/www
<span class="nb">echo</span> <span class="s1">&#39;&lt;html&gt;&lt;body&gt;success&lt;/body&gt;&lt;/html&gt;&#39;</span> &gt; index.html
</pre></div>


<p>You will need to enable debug mode on your phone - depending on your Android version this may require finding some hidden menu items! See the tutorial at <a href="https://www.kingoapp.com/root-tutorials/how-to-enable-usb-debugging-mode-on-android.htm">https://www.kingoapp.com/root-tutorials/how-to-enable-usb-debugging-mode-on-android.htm</a>.</p>
<p>This done, you just need to plug your phone in and run:</p>
<div class="highlight"><pre><span></span>cordova run android
</pre></div>


<p>Tada! Well, hopefully, Tada. It's possible you'll encounter other issues - it took me a bit of research to get this far. Many other people have been there before, so with a bit of online search you should be able to find the solution to any problem.</p>
<h2>Debuging</h2>
<p>You can view the logs from the phone by running:</p>
<div class="highlight"><pre><span></span>adb logcat
</pre></div>
            </div>
        </div>
    </div>
        </div>

        <div id="footer">
            <p>Alice online: <a href="https://github.com/aliceh75">GitHub</a> <a href="https://gitlab.com/aliceh75">GitLab</a> <a href="https://twitter.com/aliceheaton75">Twitter</a></p>
            <p>Site generated by <a href="https://pelican.readthedocs.org">Pelican</a>, theme loosely based on <a href="https://github.com/tbunnyman/pelican-chunk">Chunk</a></p>
            <p>All content by Alice Heaton, licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
               <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Licence" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" /></a>
            </p>
        </div>
    </div>
</body>
</html>